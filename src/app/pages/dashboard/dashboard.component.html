<div class="dashboard-container">
  <!-- Header do Dashboard -->
  <div class="dashboard-header">
    <div class="header-content">
      <div class="header-text">
        <h1>Dashboard</h1>
        <p>VisÃ£o geral do sistema CleanSoft EstÃ©tica</p>
        <div class="header-stats">
          <span class="stat-badge">
            <i class="fas fa-calendar"></i>
            {{ getCurrentDate() }}
          </span>
          <span class="stat-badge">
            <i class="fas fa-clock"></i>
            {{ getCurrentTime() }}
          </span>
        </div>
      </div>
      <div class="header-actions">
        <button class="refresh-btn" (click)="loadDashboardData()">
          <i class="fas fa-sync-alt"></i>
          Atualizar
        </button>
      </div>
    </div>
  </div>

  <!-- Cards de EstatÃ­sticas Principais -->
  <div class="stats-grid">
    <div class="stat-card primary">
      <div class="stat-icon">
        <i class="fas fa-users"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.totalCustomers }}</h3>
        <p>Total de Clientes</p>
        <div class="stat-trend positive">
          <i class="fas fa-arrow-up"></i>
          <span>+12% este mÃªs</span>
        </div>
      </div>
    </div>

    <div class="stat-card success">
      <div class="stat-icon">
        <i class="fas fa-car"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.totalVehicles }}</h3>
        <p>Total de VeÃ­culos</p>
        <div class="stat-trend positive">
          <i class="fas fa-arrow-up"></i>
          <span>+8% este mÃªs</span>
        </div>
      </div>
    </div>

    <div class="stat-card warning">
      <div class="stat-icon">
        <i class="fas fa-shopping-cart"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.totalSales }}</h3>
        <p>Vendas do MÃªs</p>
        <div class="stat-trend positive">
          <i class="fas fa-arrow-up"></i>
          <span>+15% este mÃªs</span>
        </div>
      </div>
    </div>

    <div class="stat-card info">
      <div class="stat-icon">
        <i class="fas fa-dollar-sign"></i>
      </div>
      <div class="stat-content">
        <h3>R$ {{ stats.totalRevenue.toFixed(2) }}</h3>
        <p>Receita do MÃªs</p>
        <div class="stat-trend positive">
          <i class="fas fa-arrow-up"></i>
          <span>+22% este mÃªs</span>
        </div>
      </div>
    </div>

    <div class="stat-card purple">
      <div class="stat-icon">
        <i class="fas fa-tools"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.pendingServices }}</h3>
        <p>ServiÃ§os Pendentes</p>
        <div class="stat-trend negative">
          <i class="fas fa-arrow-down"></i>
          <span>-5% este mÃªs</span>
        </div>
      </div>
    </div>

    <div class="stat-card danger">
      <div class="stat-icon">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <div class="stat-content">
        <h3>{{ stats.lowStockProducts }}</h3>
        <p>Produtos em Falta</p>
        <div class="stat-trend negative">
          <i class="fas fa-arrow-up"></i>
          <span>+3% este mÃªs</span>
        </div>
      </div>
    </div>
  </div>

  <!-- GrÃ¡ficos e AnÃ¡lises -->
  <div class="charts-section">
    <div class="chart-card">
      <div class="card-header">
        <h3>Vendas dos Ãšltimos 7 Dias</h3>
        <div class="chart-actions">
          <button class="chart-btn active">7D</button>
          <button class="chart-btn">30D</button>
          <button class="chart-btn">90D</button>
        </div>
      </div>
      <div class="chart-content">
        <canvas #salesChart></canvas>
      </div>
    </div>

    <div class="chart-card">
      <div class="card-header">
        <h3>DistribuiÃ§Ã£o de ServiÃ§os</h3>
        <span class="chart-subtitle">Por categoria</span>
      </div>
      <div class="chart-content">
        <canvas #servicesChart></canvas>
      </div>
    </div>
  </div>

  <!-- SeÃ§Ãµes de InformaÃ§Ãµes -->
  <div class="info-sections">
    <div class="info-card">
      <div class="card-header">
        <h3>Vendas Recentes</h3>
        <a href="/sales" class="view-all">
          <span>Ver Todas</span>
          <i class="fas fa-arrow-right"></i>
        </a>
      </div>
      <div class="card-content">
        <div class="sale-item" *ngFor="let sale of recentSales">
          <div class="sale-avatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="sale-info">
            <strong>{{ sale.customer }}</strong>
            <span class="vehicle">{{ sale.vehicle }}</span>
            <span class="sale-date">{{ sale.date | date:'dd/MM/yyyy' }}</span>
          </div>
          <div class="sale-details">
            <span class="amount">R$ {{ sale.total.toFixed(2) }}</span>
            <span class="status" [class]="sale.status.toLowerCase()">
              <i class="fas fa-check-circle"></i>
              {{ sale.status }}
            </span>
          </div>
        </div>
        <div class="empty-state" *ngIf="recentSales.length === 0">
          <i class="fas fa-chart-line"></i>
          <p>Nenhuma venda recente</p>
        </div>
      </div>
    </div>

    <div class="info-card">
      <div class="card-header">
        <h3>Produtos com Estoque Baixo</h3>
        <a href="/products" class="view-all">
          <span>Ver Todos</span>
          <i class="fas fa-arrow-right"></i>
        </a>
      </div>
      <div class="card-content">
        <div class="stock-item" *ngFor="let product of lowStockProducts">
          <div class="stock-indicator" [class]="getStockLevel(product.currentStock, product.minimumStock)">
            <i class="fas fa-box"></i>
          </div>
          <div class="product-info">
            <strong>{{ product.name }}</strong>
            <span class="stock-warning">
              Estoque: {{ product.currentStock }}/{{ product.minimumStock }}
            </span>
          </div>
          <div class="stock-status">
            <span class="status low">
              <i class="fas fa-exclamation-triangle"></i>
              Baixo
            </span>
          </div>
        </div>
        <div class="empty-state" *ngIf="lowStockProducts.length === 0">
          <i class="fas fa-check-circle"></i>
          <p>Estoque em dia</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Aniversariantes do MÃªs -->
  <div class="birthday-section">
    <div class="birthday-header">
      <h3>ðŸŽ‚ Aniversariantes do MÃªs</h3>
      <span class="birthday-count">{{ birthdayCustomers.length }} clientes</span>
    </div>
    <div class="birthday-grid">
      <div class="birthday-card" *ngFor="let customer of birthdayCustomers">
        <div class="birthday-avatar">
          <i class="fas fa-user"></i>
        </div>
        <div class="birthday-info">
          <strong>{{ customer.name }}</strong>
          <span class="birthday-date">{{ customer.date }}</span>
          <span class="birthday-age">{{ customer.age }} anos</span>
        </div>
        <div class="birthday-actions">
          <button class="birthday-btn">
            <i class="fas fa-gift"></i>
            ParabÃ©ns
          </button>
        </div>
      </div>
      <div class="birthday-empty" *ngIf="birthdayCustomers.length === 0">
        <i class="fas fa-birthday-cake"></i>
        <p>Nenhum aniversariante este mÃªs</p>
      </div>
    </div>
  </div>

  <!-- MÃ©tricas RÃ¡pidas -->
  <div class="quick-metrics">
    <div class="metric-card">
      <div class="metric-icon">
        <i class="fas fa-calendar-check"></i>
      </div>
      <div class="metric-content">
        <h4>Agendamentos Hoje</h4>
        <div class="metric-value">
          <span class="count">{{ todayAppointments }}</span>
          <span class="trend">serviÃ§os agendados</span>
        </div>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon">
        <i class="fas fa-truck"></i>
      </div>
      <div class="metric-content">
        <h4>Produtos para Repor</h4>
        <div class="metric-value">
          <span class="count">{{ productsToRestock }}</span>
          <span class="trend">itens em falta</span>
        </div>
      </div>
    </div>

    <div class="metric-card">
      <div class="metric-icon">
        <i class="fas fa-chart-line"></i>
      </div>
      <div class="metric-content">
        <h4>Meta Mensal</h4>
        <div class="metric-value">
          <span class="percentage">{{ monthlyGoalPercentage }}%</span>
          <span class="trend">R$ {{ stats.totalRevenue.toFixed(2) }} / R$ {{ monthlyGoal.toFixed(2) }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
